<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">PKMN Budget Tracker</title>
    <link rel="icon" href="favicon.ico">
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f5f5f5;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }
        
        .container {
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            padding: 30px;
            width: 100%;
            max-width: 500px;
        }
        
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
            font-size: 28px;
        }
        
        .pokemon-health-display {
            margin-bottom: 30px;
        }
        
        .health-bars {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .health-bar-container {
            width: 100%;
            height: 30px;
            background-color: #e0e0e0;
            border-radius: 15px;
            overflow: hidden;
            position: relative;
            border: 2px solid #333;
        }
        
        .health-bar {
            height: 100%;
            background-color: #4CAF50;
            width: 100%;
            transition: width 0.3s ease, background-color 0.3s ease;
        }
        
        .pokeball {
            width: 30px;
            height: 30px;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
        }
        
        .health-info {
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
            font-weight: bold;
        }
        
        .health-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 5px;
            margin-bottom: 10px;
        }
        
        .health-controls button {
            width: 100px;
            border: 2px solid #333;
            font-weight: bold;
        }
        
        .input-section {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        input, select {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }
        
        button {
            background-color: #FFCB05;
            color: #333;
            border: none;
            border-radius: 5px;
            padding: 12px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #F5C100;
        }
        
        .transaction-history {
            margin-top: 30px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .transaction-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .cost {
            color: #E53935;
            font-weight: bold;
        }
        
        .positive {
            color: #4CAF50;
        }
        
        #effect-message {
            color: #D32F2F;
            font-weight: bold;
            text-align: center;
            margin: 10px 0;
            opacity: 0;
            transition: opacity 0.5s;
        }
        
        @media (max-width: 600px) {
            .container {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <input type="text" id="tracker-title" value="PKMN Budget Tracker" style="width:100%; font-size:28px; text-align:center; margin-bottom:30px; border:none; border-bottom:2px solid #333; padding-bottom:10px; font-weight:bold;">
        
        <div class="pokemon-health-display">
            <div class="health-bars">
                <div class="health-bar-container">
                    <div class="health-bar" id="health-bar"></div>
                </div>
                <div class="pokeball"></div>
            </div>
            <div class="health-info">
                <span id="current-budget">$0</span>
                <span id="max-budget">/ $0</span>
            </div>
            <div id="effect-message">It's Super Effective!</div>
            <div class="health-controls">
                <button id="decrease-health-75" style="background-color: #EF9A9A;">-75</button>
                <button id="decrease-health" style="background-color: #FFCDD2;">-10</button>
                <button id="increase-health" style="background-color: #BBDEFB;">+10</button>
                <button id="increase-health-75" style="background-color: #90CAF9;">+75</button>
            </div>
        </div>
        
        <div class="input-section">
            <input type="number" id="initial-budget" placeholder="Enter initial budget" min="0">
            
            <select id="transaction-type">
                <option value="expense">Expense</option>
                <option value="income">Income</option>
            </select>
            
            <input type="number" id="amount" placeholder="Enter amount" min="0">
            
            <input type="text" id="description" placeholder="Transaction description">
            
            <button id="add-transaction">Add Transaction</button>
            <button id="reset-transactions" style="background-color: #E53935; color: white; margin-right: 10px;">Reset All Data</button>
            <button id="export-transactions" style="background-color: #4CAF50; color: white;">Export History</button>
        </div>
        
        <div class="transaction-history">
            <h3>Transaction History</h3>
            <div id="transactions"></div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            let currentBudget = 0;
            let maxBudget = 0;
            const transactions = JSON.parse(localStorage.getItem('budgetTransactions')) || [];
            
            const initialBudgetInput = document.getElementById('initial-budget');
            const transactionTypeSelect = document.getElementById('transaction-type');
            const amountInput = document.getElementById('amount');
            const descriptionInput = document.getElementById('description');
            const addTransactionBtn = document.getElementById('add-transaction');
            const healthBar = document.getElementById('health-bar');
            const currentBudgetDisplay = document.getElementById('current-budget');
            const maxBudgetDisplay = document.getElementById('max-budget');
            const transactionsContainer = document.getElementById('transactions');
            const effectMessage = document.getElementById('effect-message');
            
            // Load saved data when page loads
            function loadSavedData() {
                const savedBudget = localStorage.getItem('currentBudget');
                const savedMaxBudget = localStorage.getItem('maxBudget');
                const savedTransactions = JSON.parse(localStorage.getItem('budgetTransactions'));
                
                if (savedBudget) currentBudget = Number(savedBudget);
                if (savedMaxBudget) maxBudget = Number(savedMaxBudget);
                if (savedTransactions && savedTransactions.length) {
                    initialBudgetInput.value = maxBudget;
                    savedTransactions.forEach(t => {
                        addTransactionToHistory(t);
                    });
                    updateBudgetDisplay();
                }
            }
            
            // Load tracker title if saved
            const savedTitle = localStorage.getItem('trackerTitle');
            const titleInput = document.getElementById('tracker-title');
            if (savedTitle) {
                titleInput.value = savedTitle;
            }
            titleInput.addEventListener('change', function() {
                localStorage.setItem('trackerTitle', this.value);
                document.getElementById('page-title').textContent = this.value;
            });

            loadSavedData();
            
            // Set initial budget when user types in the initial budget field
            initialBudgetInput.addEventListener('change', function() {
                maxBudget = Number(this.value);
                currentBudget = maxBudget; // Set current budget to max budget initially
                updateBudgetDisplay();
            });
            
            // Add transaction button click handler
            addTransactionBtn.addEventListener('click', function() {
                if (maxBudget === 0) {
                    alert('Please set an initial budget first!');
                    return;
                }
                
                const amount = Number(amountInput.value);
                const description = descriptionInput.value;
                const type = transactionTypeSelect.value;
                
                if (amount <= 0) {
                    alert('Please enter a valid amount');
                    return;
                }
                
                if (!description) {
                    alert('Please enter a description');
                    return;
                }
                
                if (type === 'expense' && amount > currentBudget) {
                    alert('Not enough budget!');
                    return;
                }
                
                // Record transaction
                const transaction = {
                    type: type,
                    amount: amount,
                    description: description,
                    date: new Date().toLocaleDateString()
                };
                
                transactions.push(transaction);
                
                // Update budget
                if (type === 'expense') {
                    currentBudget -= amount;
                } else {
                    currentBudget += amount;
                }
                
                // Update display
                updateBudgetDisplay();
                addTransactionToHistory(transaction);
                
                // Save transactions to localStorage
                localStorage.setItem('budgetTransactions', JSON.stringify(transactions));
                localStorage.setItem('currentBudget', currentBudget);
                localStorage.setItem('maxBudget', maxBudget);
                
                // Clear input fields
                amountInput.value = '';
                descriptionInput.value = '';
            });
            
            // Export transactions handler
            document.getElementById('export-transactions').addEventListener('click', function() {
                if (transactions.length === 0) {
                    alert('No transactions to export!');
                    return;
                }
                
                let exportData = "Date\tDescription\tAmount\tType\n";
                transactions.forEach(t => {
                    exportData += `${t.date}\t${t.description}\t${t.amount.toFixed(2)}\t${t.type}\n`;
                });
                
                const blob = new Blob([exportData], {type: 'text/plain'});
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'budget_transactions.txt';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            });

            // Reset button click handler
            document.getElementById('reset-transactions').addEventListener('click', function() {
                if (confirm('Are you sure you want to reset all data? This cannot be undone.')) {
                    // Clear localStorage
                    localStorage.removeItem('budgetTransactions');
                    localStorage.removeItem('currentBudget');
                    localStorage.removeItem('maxBudget');
                    localStorage.removeItem('trackerTitle');
                    document.getElementById('tracker-title').value = 'PKMN Budget Tracker';
                    
                    // Clear UI
                    transactionsContainer.innerHTML = '';
                    currentBudget = 0;
                    maxBudget = 0;
                    initialBudgetInput.value = '';
                    updateBudgetDisplay();
                }
            });

            // Health control buttons
            document.getElementById('decrease-health').addEventListener('click', function() {
                if (maxBudget === 0) return;
                currentBudget = Math.max(0, currentBudget - 10);
                updateBudgetDisplay();
                localStorage.setItem('currentBudget', currentBudget);
            });

            document.getElementById('increase-health').addEventListener('click', function() {
                if (maxBudget === 0) return;
                currentBudget = Math.min(maxBudget, currentBudget + 10);
                updateBudgetDisplay();
                localStorage.setItem('currentBudget', currentBudget);
            });

            document.getElementById('decrease-health-75').addEventListener('click', function() {
                if (maxBudget === 0) return;
                currentBudget = Math.max(0, currentBudget - 75);
                updateBudgetDisplay();
                localStorage.setItem('currentBudget', currentBudget);
                
                // Show super effective message
                effectMessage.style.opacity = '1';
                setTimeout(() => {
                    effectMessage.style.opacity = '0';
                }, 2000);
            });

            document.getElementById('increase-health-75').addEventListener('click', function() {
                if (maxBudget === 0) return;
                currentBudget = Math.min(maxBudget, currentBudget + 75);
                updateBudgetDisplay();
                localStorage.setItem('currentBudget', currentBudget);
            });
            
            function updateBudgetDisplay() {
                // Update health bar
                const percentage = (currentBudget / maxBudget) * 100;
                healthBar.style.width = `${percentage}%`;
                
                // Change health bar color based on percentage
                if (percentage > 60) {
                    healthBar.style.backgroundColor = '#4CAF50'; // Green
                } else if (percentage > 30) {
                    healthBar.style.backgroundColor = '#FFC107'; // Yellow
                } else {
                    healthBar.style.backgroundColor = '#F44336'; // Red
                }
                
                // Update budget display
                currentBudgetDisplay.textContent = `$${currentBudget.toFixed(2)}`;
                maxBudgetDisplay.textContent = `/ $${maxBudget.toFixed(2)}`;
            }
            
            function addTransactionToHistory(transaction) {
                const transactionElement = document.createElement('div');
                transactionElement.className = 'transaction-item';
                
                const descriptionElement = document.createElement('span');
                descriptionElement.textContent = `${transaction.description}`;
                
                const amountElement = document.createElement('span');
                amountElement.textContent = `$${transaction.amount.toFixed(2)}`;
                amountElement.className = transaction.type === 'expense' ? 'cost' : 'positive';
                
                const dateElement = document.createElement('span');
                dateElement.textContent = transaction.date;
                dateElement.style.color = '#777';
                
                transactionElement.appendChild(descriptionElement);
                transactionElement.appendChild(dateElement);
                transactionElement.appendChild(amountElement);
                
                transactionsContainer.prepend(transactionElement);
            }
        });
    </script>
</body>
</html>

